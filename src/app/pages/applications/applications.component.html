<app-navigation>
  <section>
    <div class="container">
      <div class="row">
        <div class="col-md">
          <app-head [head]="{ title: 'Applications' }"> </app-head>
        </div>
      </div>

      <div class="row">
        <div class="col-md">
          <mat-card>
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="Search for vendor"
                #input
              />
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>

            <mat-progress-bar
              mode="indeterminate"
              *ngIf="loading"
            ></mat-progress-bar>

            <div class="mb-2">
              <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="applicantName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Applicant Name
                  </th>
                  <td mat-cell *matCellDef="let row">
                    {{ getName(row) }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="gender">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Gender
                  </th>
                  <td mat-cell *matCellDef="let row">{{ row.gender }}</td>
                </ng-container>

                <ng-container matColumnDef="contactEmail">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Contact Email
                  </th>
                  <td mat-cell *matCellDef="let row">{{ row.contactEmail }}</td>
                </ng-container>

                <ng-container matColumnDef="contactPhone">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Contact Phone
                  </th>
                  <td mat-cell *matCellDef="let row">{{ row.contactPhone }}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Status
                  </th>
                  <td mat-cell *matCellDef="let row">{{ row.status }}</td>
                </ng-container>

                <ng-container matColumnDef="applicationDate">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Application Date
                  </th>
                  <td mat-cell *matCellDef="let row">
                    {{ formatDate(row.applicationDate) }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let row">
                    <button [matMenuTriggerFor]="tableMenu" mat-icon-button>
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #tableMenu="matMenu">
                      <button
                        routerLink="{{ row.id }}"
                        matTooltip="View Details"
                        mat-menu-item
                      >
                        <mat-icon>assessment</mat-icon>
                        <span>View Detials</span>
                      </button>
                      <!-- <button
                        (click)="viewMap(row.latitude, row.longitude)"
                        [disabled]="row.orderLong === 0"
                        mat-menu-item
                      >
                        <mat-icon>pin_drop</mat-icon>
                        <span>View on map</span>
                      </button> -->
                    </mat-menu>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns"
                ></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                  <td class="mat-cell" colspan="3">
                    No data matching the filter "{{ input.value }}"
                  </td>
                </tr>
              </table>

              <mat-paginator
                [pageSizeOptions]="[5, 10, 25, 100]"
              ></mat-paginator>
            </div>
          </mat-card>

          <!-- <mat-card>
            <mat-card-content>
              <ul class="list-group">
                <li
                  class="list-group-item"
                  *ngFor="let application of pagedList"
                >
                  <h3>
                    {{ application.applicationNumber }}
                  </h3>
                  <div class="row">
                    <div class="col-md d-flex justify-content-end">
                      <span class="mr-4">{{ application.status }}</span>
                    </div>
                  </div>
                  <p class="mb-0 entry">
                    <strong>Applicant Name</strong>
                    <span>{{ getName(application) }}</span>
                  </p>
                  <p class="mb-0 entry" *ngIf="application.type == 'Rider'">
                    <strong>Applicant Gender</strong>
                    <span>{{ application.gender }}</span>
                  </p>
                  <p class="mb-0 entry">
                    <strong>Contact Phone</strong>
                    <span>{{ application.contactPhone }}</span>
                  </p>
                  <p class="mb-0 entry">
                    <strong>Contact Email</strong>
                    <span>{{ application.contactEmail }}</span>
                  </p>
                  <div class="row">
                    <div class="col-md d-flex justify-content-end">
                      <span class="date-created">{{
                        formatDate(application.applicationDate)
                      }}</span>
                    </div>
                  </div>
                  <button mat-stroked-button>View Details</button>
                </li>
              </ul>
              <mat-paginator
                [length]="length"
                [pageSize]="pageSize"
                [pageSizeOptions]="pageSizeOptions"
                showFirstLastButtons
                (page)="OnPageChange($event)"
              >
              </mat-paginator>
            </mat-card-content>
          </mat-card> -->
        </div>
      </div>
    </div>
  </section>
</app-navigation>
