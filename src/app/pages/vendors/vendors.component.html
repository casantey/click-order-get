<app-navigation>
  <section>
    <div class="container">
      <div class="row">
        <div class="col">
          <app-head [head]="{ title: 'Vendors' }">
            <button
              mat-stroked-button
              color="primary"
              (click)="addVendorDialog()"
            >
              <mat-icon>add_business</mat-icon>
              <span>Add Vendor</span>
            </button>
          </app-head>
        </div>
      </div>
      <div class="row">
        <div class="col-md">
          <mat-card>
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input
                matInput
                (keyup)="applyFilter($event)"
                placeholder="Search for vendor"
                #input
              />
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>

            <mat-progress-bar
              mode="indeterminate"
              *ngIf="loading"
            ></mat-progress-bar>

            <div class="mb-2">
              <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="vendorName">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Vendor Name
                  </th>
                  <td mat-cell *matCellDef="let row">{{ row.vendorName }}</td>
                </ng-container>

                <ng-container matColumnDef="dateAdded">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>
                    Date Added
                  </th>
                  <td mat-cell *matCellDef="let row">
                    {{ row.dateAdded | date: "MMMM dd, YYYY" }}
                  </td>
                </ng-container>

                <ng-container matColumnDef="action">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let row">
                    <button [matMenuTriggerFor]="tableMenu" mat-icon-button>
                      <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #tableMenu="matMenu">
                      <button
                        routerLink="{{ row.vendorId }}"
                        matTooltip="View Details"
                        mat-menu-item
                      >
                        <mat-icon>assessment</mat-icon>
                        <span>View Detials</span>
                      </button>
                      <button
                        (click)="viewMap(row.latitude, row.longitude)"
                        [disabled]="row.orderLong === 0"
                        mat-menu-item
                      >
                        <mat-icon>pin_drop</mat-icon>
                        <span>View on map</span>
                      </button>
                    </mat-menu>
                  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns"
                ></tr>

                <!-- Row shown when there is no matching data. -->
                <tr class="mat-row" *matNoDataRow>
                  <td class="mat-cell" colspan="3">
                    No data matching the filter "{{ input.value }}"
                  </td>
                </tr>
              </table>

              <mat-paginator
                [pageSizeOptions]="[5, 10, 25, 100]"
              ></mat-paginator>
            </div>
          </mat-card>
        </div>
      </div>
    </div>
  </section>
</app-navigation>
